<html><head><title>Using Ocsigen Server as a library</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="application/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="application/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="staticlink ocsigenserver"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Server</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a></p><p><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsipersist/" class="ocsimore_phrasing_link">Ocsipersist</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="staticlink" class="ocsimore_phrasing_link">Using as a library</a></h3><h2>Extensions</h2><h3><a href="staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3><a href="extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h1>Ocsigen server - API reference</h1><h2><a href=".././api/Ocsigen_server" class="ocsimore_phrasing_link">Ocsigen_server</a></h2><h2>Extensions</h2><h3><a href=".././api/Staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href=".././api/Extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href=".././api/Accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href=".././api/Deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href=".././api/Redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href=".././api/Revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href=".././api/Rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href=".././api/Outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href=".././api/Userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href=".././api/Cors" class="ocsimore_phrasing_link">Cors</a></h3><h2>Persistent data, writing in the logs, configuration file extension, polymorphic tables</h2><h3><a href=".././api/Ocsigen_lib" class="ocsimore_phrasing_link">Ocsigen_lib</a></h3><h3><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h3><h3><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h3><h3><a href=".././api/Polytables" class="ocsimore_phrasing_link">Polytables</a></h3><h3><a href=".././api/Ocsigen_cache" class="ocsimore_phrasing_link">Ocsigen_cache</a></h3><h3><a href=".././api/Ocsigen_config" class="ocsimore_phrasing_link">Ocsigen_config</a></h3><h2>Extending Ocsigen Server</h2><h3><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h3><h3><a href=".././api/Ocsigen_local_files" class="ocsimore_phrasing_link">Ocsigen_local_files</a></h3><h3><a href=".././api/Ocsigen_header" class="ocsimore_phrasing_link">Ocsigen_header</a></h3><h3><a href=".././api/Ocsigen_stream" class="ocsimore_phrasing_link">Ocsigen_stream</a></h3><h2>Indexes</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../dev/manual/staticlink">dev</option><option value=".././../6.0/manual/staticlink" selected="selected">6.0</option></select><nav class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="staticlink" class="ocsimore_phrasing_link">Using as a library</a></h3><h2>Extensions</h2><h3><a href="staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3><a href="extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h1>Ocsigen server - API reference</h1><h2><a href=".././api/Ocsigen_server" class="ocsimore_phrasing_link">Ocsigen_server</a></h2><h2>Extensions</h2><h3><a href=".././api/Staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href=".././api/Extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href=".././api/Accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href=".././api/Authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href=".././api/Deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href=".././api/Redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href=".././api/Revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href=".././api/Rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href=".././api/Outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href=".././api/Userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href=".././api/Cors" class="ocsimore_phrasing_link">Cors</a></h3><h2>Persistent data, writing in the logs, configuration file extension, polymorphic tables</h2><h3><a href=".././api/Ocsigen_lib" class="ocsimore_phrasing_link">Ocsigen_lib</a></h3><h3><a href=".././api/Ocsigen_messages" class="ocsimore_phrasing_link">Ocsigen_messages</a></h3><h3><a href=".././api/Ocsigen_parseconfig" class="ocsimore_phrasing_link">Ocsigen_parseconfig</a></h3><h3><a href=".././api/Polytables" class="ocsimore_phrasing_link">Polytables</a></h3><h3><a href=".././api/Ocsigen_cache" class="ocsimore_phrasing_link">Ocsigen_cache</a></h3><h3><a href=".././api/Ocsigen_config" class="ocsimore_phrasing_link">Ocsigen_config</a></h3><h2>Extending Ocsigen Server</h2><h3><a href=".././api/Ocsigen_extensions" class="ocsimore_phrasing_link">Ocsigen_extensions</a></h3><h3><a href=".././api/Ocsigen_local_files" class="ocsimore_phrasing_link">Ocsigen_local_files</a></h3><h3><a href=".././api/Ocsigen_header" class="ocsimore_phrasing_link">Ocsigen_header</a></h3><h3><a href=".././api/Ocsigen_stream" class="ocsimore_phrasing_link">Ocsigen_stream</a></h3><h2>Indexes</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3></nav></nav><article class="rightcol"><h1>Using Ocsigen Server as a library</h1><h2>Creating and running a statically linked executable</h2><p>Instead of using a configuration file, you can use Ocsigen Server as a library
for your OCaml program.
</p><p>Call function <span><a href=".././api/Ocsigen_server#VALstart">Ocsigen_server.start</a></span> like this to run the server:
</p><pre class=""><code class="language-ocaml translatable">let _ =
  Ocsigen_server.start
    [ Ocsigen_server.host [Staticmod.run ~dir:&quot;local/var/www/mysite/&quot; ()]]</code></pre><p>Have a look at the API documentation for <span><a href=".././api/Ocsigen_server#VALstart">Ocsigen_server.start</a></span>
to see how to provide configuration options.
</p><p>As with the configuration file, you can define several virtual hosts,
for example for different hostnames. See function 
<span><a href=".././api/Ocsigen_server#VALhost">Ocsigen_server.host</a></span> to configure them.
</p><p>Functions like <span><a href=".././api/Staticmod#VALrun">Staticmod.run</a></span> are defined by extensions.
</p><p>The programming interface follows exactly the structure of the configuration file:
Each request received by the server goes through all the instructions given
in the list. These instructions can be:
- either input filters that will modify the request
(for example <a href="rewritemod" class="ocsimore_phrasing_link">Rewritemod</a>)
- or page generation instructions (for example with <a href="staticmod" class="ocsimore_phrasing_link">Staticmod</a>,
<a href="eliom" class="ocsimore_phrasing_link">Eliom</a> or <a href="redirectmod" class="ocsimore_phrasing_link">Redirectmod</a>)
- or output filters, that will modify the result (for example
<a href="deflatemod" class="ocsimore_phrasing_link">Deflatemod</a> or <a href="cors" class="ocsimore_phrasing_link">CORS</a>).
</p><p>Here is an example of a more complex configuration:
</p><pre class=""><code class="language-ocaml translatable">let _ =
  Ocsigen_server.start
    ~ports:[`All, 8080]
    ~command_pipe:&quot;local/var/run/mysite-cmd&quot;
    ~logdir:&quot;local/var/log/mysite&quot;
    ~datadir:&quot;local/var/data/mysite&quot;
    ~default_charset:(Some &quot;utf-8&quot;)
    [ Ocsigen_server.host
        ~regexp:&quot;mydomain.com&quot;
        [ Ocsigen_server.site [&quot;subsite&quot;]
            [ Accesscontrol.(
                if_
                  (and_
                     [ ip &quot;122.122.122.122&quot;
                     ; header ~name:&quot;user-agent&quot; ~regexp:&quot;.*FooBar.*&quot;
                     ; method_ `POST ])
                  [forbidden] [])
            ; Authbasic.run ~realm:&quot;myrealm&quot;
                ~auth:(fun _u p -&gt; Lwt.return (p = &quot;toto&quot;))
                ()
            ; Staticmod.run ~dir:&quot;local/var/www/otherdir&quot; () ]
        ; Ocsigen_server.site [&quot;othersubsite&quot;]
            [ Revproxy.run
                ~redirection:
                  (Revproxy.create_redirection ~full_url:false ~regexp:&quot;(.*)&quot;
                     ~keephost:true &quot;http://localhost:8888/\\1&quot;)
                () ]
        ; Redirectmod.run
            ~redirection:
              (Redirectmod.create_redirection ~full_url:false ~regexp:&quot;old(.*)&quot;
                 &quot;new\\1&quot;)
            ()
        ; Staticmod.run ~dir:&quot;local/var/www/staticdir&quot; ()
        ; Cors.run ~max_age:86400 ~credentials:true ~methods:[`POST; `GET; `HEAD]
            ~exposed_headers:
              [ &quot;x-eliom-application&quot;
              ; &quot;x-eliom-location&quot;
              ; &quot;x-eliom-set-process-cookies&quot;
              ; &quot;x-eliom-set-cookie-substitutes&quot; ]
            ()
        ; Deflatemod.run
            ~mode:
              (`Only
                [ `Type (Some &quot;text&quot;, Some &quot;html&quot;)
                ; `Type (Some &quot;text&quot;, Some &quot;javascript&quot;)
                ; `Type (Some &quot;text&quot;, Some &quot;css&quot;)
                ; `Type (Some &quot;application&quot;, Some &quot;javascript&quot;)
                ; `Type (Some &quot;application&quot;, Some &quot;x-javascript&quot;)
                ; `Type (Some &quot;application&quot;, Some &quot;xhtml+xml&quot;)
                ; `Type (Some &quot;image&quot;, Some &quot;svg+xml&quot;)
                ; `Type (Some &quot;application&quot;, Some &quot;x-eliom&quot;) ])
            () ] ]</code></pre><p>In this example, the server defines one virtual host for domain <span class="teletype">mydomain.com</span>.
It will first check whether it is a request for directory <span class="teletype">subsite/</span>, and if yes, will reject the request
with <span class="teletype">403 Forbidden</span> if it is a POST request coming from user-agent <span class="teletype">FooBar</span> at IP 122.122.122.122.
If not, it will ask for a password before serving files from directory <span class="teletype">local/var/www/otherdir</span>.<br/>
Then we define another subsite othersubsite for which the requests will be transfered to another Web server
running locally on port 8888, then rewrite the answer location header accordingly.
Then, if the page is still not generated, the server will send a redirection if URLs starts with “old”.
Otherwise, it will try to serve files from directory <span class="teletype">local/var/www/staticdir</span>.
If the page has still not been found, a <span class="teletype">404 Not found</span> will be sent, otherwise, some CORS headers will
be added, and the result will be compressed before being sent.
</p><p>Compile this example with the following dune file:
</p><pre>(executable
 (public_name myserver)
 (name main)
 (libraries
  ocsigenserver
  ocsigenserver.ext.staticmod
  ocsigenserver.ext.authbasic
  ocsigenserver.ext.extendconfiguration
  ocsigenserver.ext.outputfilter
  ocsigenserver.ext.cors
  ocsigenserver.ext.accesscontrol
  ocsigenserver.ext.deflatemod
  ocsigenserver.ext.redirectmod
  ocsigenserver.ext.revproxy
 ))
</pre><p>This program corresponds to the following configuration file:
</p><pre>&lt;ocsigen&gt;
  &lt;server&gt;
    &lt;port&gt;8080&lt;/port&gt;
    &lt;commandpipe&gt;local/var/run/mysite-cmd&lt;/commandpipe&gt;
    &lt;logdir&gt;local/var/log/mysite&lt;/logdir&gt;
    &lt;datadir&gt;local/var/data/mysite&lt;/datadir&gt;
    &lt;charset&gt;utf-8&lt;/charset&gt;
    &lt;debugmode/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.staticmod&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.authbasic&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.extendconfiguration&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.outputfilter&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.cors&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.accesscontrol&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.deflatemod&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.redirectmod&quot;/&gt;
    &lt;extension findlib-package=&quot;ocsigenserver.ext.revproxy&quot;/&gt;
    &lt;host hostfilter=&quot;mydomain.com&quot;&gt;
      &lt;site dir=&quot;subsite&quot;&gt;
        &lt;if&gt;
          &lt;and&gt;
            &lt;ip value=&quot;122.122.122.122&quot;/&gt;
            &lt;header name=&quot;user-agent&quot; regexp=&quot;.*FooBar.*&quot;/&gt;
            &lt;method value=&quot;POST&quot;/&gt;
          &lt;/and&gt;
          &lt;then&gt;
            &lt;forbidden/&gt;
          &lt;/then&gt;
        &lt;/if&gt;
        &lt;authbasic realm=&quot;myrealm&quot;&gt;
          &lt;plain login=&quot;&quot; password=&quot;toto&quot;/&gt;
        &lt;/authbasic&gt;
        &lt;static dir=&quot;local/var/www/otherdir&quot;/&gt;
      &lt;/site&gt;
      &lt;site dir=&quot;othersite&quot;&gt;
        &lt;revproxy suburl=&quot;(.*)&quot; keephost=&quot;true&quot; dest=&quot;http://localhost:8888/otherdir/\\1&quot;/&gt;
        &lt;outputfilter header=&quot;location&quot; regexp=&quot;http://localhost:8888/(.* )&quot; dest=&quot;http://mydomain.com/\\1&quot;/&gt;
      &lt;/site&gt;
      &lt;redirect suburl=&quot;old(.*)&quot; dest=&quot;http://mydomain.org/new\\1&quot;/&gt;
      &lt;static dir=&quot;local/var/www/staticdir&quot;/&gt;
      &lt;cors max_age=&quot;86400&quot;
       credentials=&quot;true&quot;
       methods=&quot;POST,GET,HEAD&quot;
       exposed_headers=&quot;x-eliom-application,x-eliom-location,x-eliom-set-process-cookies,x-eliom-set-cookie-substitutes&quot;/&gt;
      &lt;deflate compress=&quot;only&quot;&gt;
        &lt;type&gt;text/html&lt;/type&gt;
        &lt;type&gt;text/javascript&lt;/type&gt;
        &lt;type&gt;text/css&lt;/type&gt;
        &lt;type&gt;application/javascript&lt;/type&gt;
        &lt;type&gt;application/x-javascript&lt;/type&gt;
        &lt;type&gt;application/xhtml+xml&lt;/type&gt;
        &lt;type&gt;image/svg+xml&lt;/type&gt;
        &lt;type&gt;application/x-eliom&lt;/type&gt;
      &lt;/deflate&gt;
    &lt;/host&gt;
  &lt;/server&gt;
&lt;/ocsigen&gt;
</pre><h2>Experimental: Using a configuration file with a static executable</h2><p>If you want to use the configuration file with a statically linked executable,
call
</p><pre>Ocsigen_server.exec (Ocsigen_parseconfig.parse_config ())
</pre><p>to launch the server's main loop.
</p><p>Alternatively, you can link module <span class="teletype">ocsigenserver.cmx</span>
to set the default commandline option and launch the main loop.
</p><p>If you still want to use dynamic linking, add option <span class="teletype">-linkall</span> while
compiling, otherwise the compiler may remove some modules from packages
<span class="teletype">cma/cmxa</span>.
</p><p>All statically linked extensions need to be initialized from the configuration 
file. To do that, replace the lines like:
</p><pre>&lt;extension module=&quot;staticmod.cmxs&quot; /&gt;
</pre><p>or
</p><pre>&lt;extension findlib-package=&quot;ocsigenserver.ext.staticmod&quot; /&gt;
</pre><p>by
</p><pre>&lt;extension name=&quot;staticmod&quot; /&gt;
</pre><p>This will not load a new module, but merely initializes one which must have been
linked statically. Thus it is possible to give configuration options to
extensions as usual.
</p><p>This is an experimental feature.
Let us know if you test it (for example by opening an issue on Github).</p></article></div></div></body></html>
