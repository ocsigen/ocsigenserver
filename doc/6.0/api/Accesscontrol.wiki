=Module <<a_api_type | module Accesscontrol >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Accesscontrol>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Accesscontrol >><<span class="ocsforge_color_keyword"|end>>>>~Accesscontrol~: ~Conditional access to some sites

----

~If you want to use this extension with ~Ocsigen ~Server~'s configuration file~, #   have a look at the <<a_manual chapter="accesscontrol"|manual page>>~.
#   ~If you are using ~Ocsigen ~Server as a library~, use the interface described
#   here~. ~Each of these functions behaves exactly as its configuration file
    counterpart~. 
~+



~This module belongs to ocamlfind package
   <<span class="odocwiki_inlinecode"|ocsigenserver~.ext~.accesscontrol>>~.

~Example of use ~(with <<a_manual chapter="redirectmod"|Redirectmod>>~)~:

<<code language='ocaml'|let _ =
  Ocsigen_server.start
    [ Ocsigen_server.host ~regexp:".*"
        [ Accesscontrol.(
            if_ (not_ ssl)
              [ Redirectmod.run
                  ~redirection:
                    (Redirectmod.create_redirection ~full_url:false
                       ~regexp:"(.* )" "https://yourdomain.org/\\1")
                  () ]
              [ ... ]) ]
    ]
>>

<<pre class="ocsforge_color odocwiki_code" id="TYPEcondition"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|condition>>>><<pre id="VALip" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ip>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALport" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|port>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|int <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALssl" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ssl>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALheader" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|header>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| name: >>string <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| regexp: >>string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALmethod_" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|method~_>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|meth>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALprotocol" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|protocol>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|version>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALpath" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|path>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_label"| regexp: >>string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALand_" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|and~_>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="condition" | type Accesscontrol.condition >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALor_" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|or~_>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="condition" | type Accesscontrol.condition >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALnot_" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|not~_>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="condition" | type Accesscontrol.condition >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="condition" | type Accesscontrol.condition >>>>>><<pre id="VALif_" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|if~_>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="condition" | type Accesscontrol.condition >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >> list <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALiffound" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|iffound>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALifnotfound" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|ifnotfound>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?code: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALnotfound" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|notfound>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALnextsite" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|nextsite>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALnexthost" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|nexthost>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALstop" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|stop>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALforbidden" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|forbidden>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALallow_forward_for" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|allow~_forward~_for>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| ?check_equal_ip: >>bool <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALallow_forward_proto" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|allow~_forward~_proto>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_server.instruction" | type Ocsigen_server.instruction >>>>>><<pre id="VALsection" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|section>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Lwt_log_core>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|section>>>>>><<div class="odocwiki_info"|~Use ~Lwt~_log~.~Section~.set~_level in order to change the log level
>>
