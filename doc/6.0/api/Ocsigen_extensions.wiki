=Module <<a_api_type | module Ocsigen_extensions >> =
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<span class="ocsforge_color_uid"|<<span class="ocsforge_color_uid"|Ocsigen_extensions>>>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Ocsigen_extensions >><<span class="ocsforge_color_keyword"|end>>>>~Extensions interface for ~Ocsigen ~Server

----
<<pre id="VALsection" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|section>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Lwt_log_core>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|section>>>>>><<div class="odocwiki_info"|use ~Lwt~_log~.~Section~.set~_level in order to debug
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|include>> <<a_api | module Ocsigen_command >>>>
<<pre id="EXCEPTIONOcsigen_http_error" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Ocsigen_http_error>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> * <<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>>>>>><<pre id="EXCEPTIONBad_config_tag_for_extension" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Bad_config_tag_for_extension>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|string>>>><<div class="odocwiki_info"|~Xml tag not recognized by an extension ~(usually not a real error~)
>>
<<pre id="EXCEPTIONError_in_config_file" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Error_in_config_file>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|string>>>><<div class="odocwiki_info"|~Error in a ~<site~> tag inside the main ocsigen~.conf file
>>
<<pre id="EXCEPTIONError_in_user_config_file" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Error_in_user_config_file>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|string>>>><<div class="odocwiki_info"|~Option incorrect in a userconf file
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEfile_info"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|file~_info>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_multipart.file_info" | type Ocsigen_multipart.file_info >>>>  <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|tmp_filename:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|filesize:>> <<span class="odocwiki_type"|int64>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|raw_original_filename:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|file_content_type:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> * <<span class="ocsforge_color_delimiter"| ( >>string * string<<span class="ocsforge_color_delimiter"| ) >> list<<span class="ocsforge_color_delimiter"| ) >> option>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="VALbadconfig" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|badconfig>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>'a, unit, string, 'b<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Stdlib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|format4>> <<span class="ocsforge_color_delimiter"| -> >> 'a>>>><<div class="odocwiki_info"|~Convenient function for raising ~Error~_in~_config~_file exceptions with
    a sprintf~-formatted argument~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEvirtual_hosts"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|virtual~_hosts>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>string * <<span class="ocsforge_color_uid"|Re>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Pcre>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|regexp>> * int option<<span class="ocsforge_color_delimiter"| ) >> list>> >><<div class="odocwiki_info"|~Type of the result of parsing the field <<span class="odocwiki_inlinecode"|hostfiler>> in the configuration
    file~. ~Inside the list~, the first argument is the host itself
    ~(which is a glob~-like pattern that can contains <<span class="odocwiki_inlinecode"|~*>>~)~, a regexp
    parsing this pattern~, and optionally a port~.
>>
<<pre id="VALhash_virtual_hosts" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|hash~_virtual~_hosts>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="virtual_hosts" | type Ocsigen_extensions.virtual_hosts >> <<span class="ocsforge_color_delimiter"| -> >> int>>>><<pre id="VALequal_virtual_hosts" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|equal~_virtual~_hosts>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="virtual_hosts" | type Ocsigen_extensions.virtual_hosts >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="virtual_hosts" | type Ocsigen_extensions.virtual_hosts >> <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<pre id="VALhost_match" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|host~_match>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| virtual_hosts: >><<a_api text="virtual_hosts" | type Ocsigen_extensions.virtual_hosts >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| host: >>string option <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| port: >>int <<span class="ocsforge_color_delimiter"| -> >> bool>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEdo_not_serve"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|do~_not~_serve>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|do_not_serve_regexps:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|do_not_serve_files:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|do_not_serve_extensions:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~Configuration to hide~/forbid local files
>>
<<pre id="VALserve_everything" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|serve~_everything>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >>>>>><<pre id="EXCEPTIONIncorrectRegexpes" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|IncorrectRegexpes>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >>>>>><<pre id="VALdo_not_serve_to_regexp" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|do~_not~_serve~_to~_regexp>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Re>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Pcre>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|regexp>>>>>><<div class="odocwiki_info"|~Compile a do~_not~_serve structure into a regexp~. ~Raises
    <<span class="odocwiki_inlinecode"|~Incorrect~Regexpes>> if the compilation fails~. ~The result is
    memoized for subsequent calls with the same argument
>>
<<pre id="VALjoin_do_not_serve" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|join~_do~_not~_serve>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEconfig_info"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|config~_info>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|default_hostname:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|default_httpport:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|default_httpsport:>> <<span class="odocwiki_type"|int>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|default_protocol_is_https:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|mime_assoc:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_charset_mime.mime_assoc" | type Ocsigen_charset_mime.mime_assoc >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|charset_assoc:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_charset_mime.charset_assoc" | type Ocsigen_charset_mime.charset_assoc >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|default_directory_index:>> <<span class="odocwiki_type"|string list>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Default name to use as index file when a directory is requested~.
      ~Use <<span class="odocwiki_inlinecode"|~None>> if no index should be tried~. ~The various indexes are
      tried in the given order~. ~If no index is specified~, or the index
      does not exists~, the content of the directory might be listed~,
      according to <<span class="odocwiki_inlinecode"|list~_directory~_content>>
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|list_directory_content:>> <<span class="odocwiki_type"|bool>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Should the list of files in a directory be displayed if there is
      no index in this directory ~?
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|follow_symlinks:>> <<span class="odocwiki_type"|[ `Always | `No | `Owner_match ]>><<span class="ocsforge_color_delimiter"|~;>> >><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Should symlinks be followed when accessing a local file~?
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|do_not_serve_404:>> <<span class="odocwiki_type"|<<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|do_not_serve_403:>> <<span class="odocwiki_type"|<<a_api text="do_not_serve" | type Ocsigen_extensions.do_not_serve >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|uploaddir:>> <<span class="odocwiki_type"|string option>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|maxuploadfilesize:>> <<span class="odocwiki_type"|int64 option>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~Configuration options~, passed to ~(and modified by~) extensions
>>
<<pre id="VALdefault_config_info" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|default~_config~_info>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="config_info" | type Ocsigen_extensions.config_info >>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPErequest"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|request>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|request_info:>> <<span class="odocwiki_type"|<<a_api text="Ocsigen_request.t" | type Ocsigen_request.t >>>><<span class="ocsforge_color_delimiter"|~;>> >>>><<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|request_config:>> <<span class="odocwiki_type"|<<a_api text="config_info" | type Ocsigen_extensions.config_info >>>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<pre id="EXCEPTIONOcsigen_is_dir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Ocsigen_is_dir>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_request.t" | type Ocsigen_request.t >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Uri>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEanswer"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|answer>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_do_nothing>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~I don~'t want to do anything
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_found>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_response.t" | type Ocsigen_response.t >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|"~O~K stop! ~I will take the page~.  ~You can start the following
      request of the same pipelined connection~.  ~Here is the function
      to generate the page"~.  ~The extension must return ~Ext~_found as
      soon as possible when it is sure it is safe to start next
      request~.  ~Usually immediately~. ~But in some case~, for example
      proxies~, you don~'t want the request of one connection to be
      handled in different order~. ~(for example revproxy~.ml starts its
      requests to another server before returning ~Ext~_found~, to ensure
      that all requests are done in same order~)~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_found_stop>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_response.t" | type Ocsigen_response.t >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Found but do not try next extensions
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_next>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Page not found~. ~Try next extension~. ~The status is usually
      `~Not~_found~, but may be for example `~Forbidden ~(~4~0~3~) if you want
      to try another extension afterwards~. ~Same as ~Ext~_continue~_with
      but does not change the request~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_stop_site>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> * <<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Error~. ~Do not try next extension~, but try next site~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_stop_host>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> * <<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Error~.
      ~Do not try next extension~,
      do not try next site~,
      but try next host~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_stop_all>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> * <<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Error~. ~Do not try next extension~,
      do not try next site~,
      do not try next host~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_continue_with>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|\\    <<span class="ocsforge_color_delimiter"| ( >><<a_api text="request" | type Ocsigen_extensions.request >> * <<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> *\\     <<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Used to modify the request before giving it to next extension~.
      ~The extension returns the request ~(possibly modified~) and a set
      of cookies if it wants to set or cookies
      ~(<<a_api | val Ocsigen_cookie_map.empty >> for no cookies~)~.  ~You must add
      these cookies yourself in request if you want them to be seen by
      subsequent extensions~, for example using
      <<span class="odocwiki_inlinecode"|~Ocsigen~_http~_frame~.compute~_new~_ri~_cookies>>~.  ~The status is
      usually equal to the one received from preceding extension ~(but
      you may want to modify it~)~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_retry_with>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="request" | type Ocsigen_extensions.request >> * <<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Used to retry all the extensions with a new request~.  ~The
      extension returns the request ~(possibly modified~) and a set of
      cookies if it wants to set or cookies
      ~(<<a_api | val Ocsigen_cookie_map.empty >> for no cookies~)~.  ~You must add
      these cookies yourself in request if you want them to be seen by
      subsequent extensions~, for example using
      <<span class="odocwiki_inlinecode"|~Ocsigen~_http~_frame~.compute~_new~_ri~_cookies>>~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_sub_result>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<a_api text="extension_composite" | type Ocsigen_extensions.extension_composite >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Used if your extension want to define option that may contain
      other options from other extensions~.  ~In that case~, while
      parsing the configuration file~, call the parsing function ~(of
      type <<span class="odocwiki_inlinecode"|parse~_fun>>~)~, that will return something of type
      <<span class="odocwiki_inlinecode"|extension~_composite>>~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_found_continue_with>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|\\    <<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_response.t" | type Ocsigen_response.t >> * <<a_api text="request" | type Ocsigen_extensions.request >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Same as <<span class="odocwiki_inlinecode"|~Ext~_found>> but may modify the request~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Ext_found_continue_with'>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="Ocsigen_response.t" | type Ocsigen_response.t >> * <<a_api text="request" | type Ocsigen_extensions.request >><<span class="ocsforge_color_delimiter"| ) >>>>>><<span class="odocwiki_comments"|<<span class="odocwiki_comments_open"|(*>> <<span|<<div class="odocwiki_info"|~Same as <<span class="odocwiki_inlinecode"|~Ext~_found~_continue~_with>> but does not allow to delay
      the computation of the page~. ~You should probably not use it~, but
      for output filters~.
>>
>><<span class="odocwiki_comments_close"| ~*)>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPErequest_state"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|request~_state>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_variants"|<<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Req_not_found>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Cohttp>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Code>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|status>> * <<a_api text="request" | type Ocsigen_extensions.request >><<span class="ocsforge_color_delimiter"| ) >>>>>>>><<span class="odocwiki_variant"|<<span class="odocwiki_variant_constr"|<<span class="ocsforge_color_keyword"| ~|>> <<span class="ocsforge_color_uid"|Req_found>> <<span class="ocsforge_color_keyword"|of>> <<span class="odocwiki_type"|<<span class="ocsforge_color_delimiter"| ( >><<a_api text="request" | type Ocsigen_extensions.request >> * <<a_api text="Ocsigen_response.t" | type Ocsigen_response.t >><<span class="ocsforge_color_delimiter"| ) >>>>>>>>>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEextension_composite"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|extension~_composite>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|\\  <<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="request_state" | type Ocsigen_extensions.request_state >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_delimiter"| ( >><<a_api text="answer" | type Ocsigen_extensions.answer >> * <<a_api text="Ocsigen_cookie_map.t" | type Ocsigen_cookie_map.t >><<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>> >><<pre class="ocsforge_color odocwiki_code" id="TYPEextension"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|extension>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<a_api text="request_state" | type Ocsigen_extensions.request_state >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="answer" | type Ocsigen_extensions.answer >> <<span class="ocsforge_color_uid"|Lwt>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>> >><<div class="odocwiki_info"|~For each ~<site~> tag in the configuration file~,
    you can set the extensions you want~.
    ~Each extension is implemented as a function~, taking
    the charset found in configuration file~,
    the current state of the request~,
    and returning an answer~.
    ~If no page has been generated so far ~(<<span class="odocwiki_inlinecode"|~Req~_not~_found>>~)~, it receive
    the error code given by the previous extension ~(default ~4~0~4~)~,
    and the request information~.
    ~If a page has been generated by previous extensions ~(case <<span class="odocwiki_inlinecode"|~Req~_found>>~)~,
    the extension may want to modify the result ~(filters~)~.
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEparse_fun"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|parse~_fun>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Xml>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|xml>> list <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="extension_composite" | type Ocsigen_extensions.extension_composite >>>> >><<pre class="ocsforge_color odocwiki_code" id="TYPEparse_host"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|parse~_host>>>><<div class="odocwiki_info"|~Type of the functions parsing the content of a ~<host~> tag
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEuserconf_info"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|userconf~_info>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="ocsforge_color_delimiter"|~{>>
<<span class="odocwiki_record"|<<span class="odocwiki_field"|<<span class="odocwiki_field_descr"|  <<span class="ocsforge_color_label"|localfiles_root:>> <<span class="odocwiki_type"|string>><<span class="ocsforge_color_delimiter"|~;>> >>>>>><<span class="ocsforge_color_delimiter"|~}>>>><<div class="odocwiki_info"|~Information received by extensions accepting userconf files~.


    ~The parameter <<span class="odocwiki_inlinecode"|localfiles~_root>> is an absolute path to the
    directory that the user is allowed to serve~. ~This is used
    by staticmod~, to disallow the user from allowing access to
    outside of this directory
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEparse_config"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|parse~_config>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|\\  <<a_api text="userconf_info" | type Ocsigen_extensions.userconf_info >> option <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="virtual_hosts" | type Ocsigen_extensions.virtual_hosts >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="config_info" | type Ocsigen_extensions.config_info >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="parse_config_aux" | type Ocsigen_extensions.parse_config_aux >>>> >><<div class="odocwiki_info"|<<span class="odocwiki_inlinecode"|parse~_config>> is the type of the functions parsing a ~<site~> tag
    ~(and returning an extension~)~.  ~Those are functions taking
    
* the name of the virtual ~<host~>

     that will be called for each ~<host~>~,
     and that will generate a function taking~:
    
* the path attribute of a ~<site~> tag

     that will be called for each ~<site~>~,
     and that will generate a function taking~:
    
* an item of the config file

     that will be called on each tag inside ~<site~> and~:
    
* raise <<span class="odocwiki_inlinecode"|~Bad~_config~_tag~_for~_extension>> if it does not recognize that tag
* return something of type <<span class="odocwiki_inlinecode"|extension>> ~(filter or page generator~)



    <<span class="odocwiki_inlinecode"|parse~_config~_user>> is the type of functions parsing a site tag
    inside an userconf file~. ~They take one more parameter~, of type userconf~_info
>>
<<pre class="ocsforge_color odocwiki_code" id="TYPEparse_config_aux"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|parse~_config~_aux>> <<span class="ocsforge_color_delimiter"|~=>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_uid"|Ocsigen_lib>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Url>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|path>> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="parse_host" | type Ocsigen_extensions.parse_host >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<a_api text="parse_fun" | type Ocsigen_extensions.parse_fun >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_uid"|Xml>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|xml>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="extension" | type Ocsigen_extensions.extension >>>> >><<pre id="VALregister" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|register>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_label"| name: >>string <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?fun_site: >><<a_api text="parse_config" | type Ocsigen_extensions.parse_config >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?end_init: >><<span class="ocsforge_color_delimiter"| ( >>unit <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?init_fun: >><<span class="ocsforge_color_delimiter"| ( >><<span class="ocsforge_color_uid"|Xml>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|xml>> list <<span class="ocsforge_color_delimiter"| -> >> unit<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >>\\  <<span class="ocsforge_color_label"| ?exn_handler: >><<span class="ocsforge_color_delimiter"| ( >>exn <<span class="ocsforge_color_delimiter"| -> >> string<<span class="ocsforge_color_delimiter"| ) >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_label"| ?respect_pipeline: >>bool <<span class="ocsforge_color_delimiter"| -> >> unit <<span class="ocsforge_color_delimiter"| -> >> unit>>>><<div class="odocwiki_info"|~For each extension generating pages~, we register its name and six functions~:
* a function <<span class="odocwiki_inlinecode"|fun~_site>> of type <<span class="odocwiki_inlinecode"|parse~_config>>~. ~This function
    will be responsible for handling the options of the configuration
    files that are recognized by the extension~, and potentially generating
    a page~.
* a function <<span class="odocwiki_inlinecode"|end~_init>> that will be called at the end of the initialisation
    phase of each site
* a function <<span class="odocwiki_inlinecode"|init~_fun>> that will be called just before registering the
    extension~, taking as parameter the configuration options between
    <<span class="odocwiki_inlinecode"|~<extension~>>> and <<span class="odocwiki_inlinecode"|~<~/extension~>>>~. ~This allows to give configuration options
    to extensions~. ~If no function is supplied~, the extension is supposed to
    accept no option ~(and loading will fail if an option is supplied~)
    ~See <<a_api | val Ocsigen_extensions.Configuration.process_elements >> for
    the easy construction of such a function~.
* a function <<span class="odocwiki_inlinecode"|exn~_handler>> that will create an error message from the
    exceptions that may be raised during the initialisation phase~, and raise again
    all other exceptions

    ~Moreover~, if the optional parameter <<span class="odocwiki_inlinecode"|~?respect~_pipeline>> is <<span class="odocwiki_inlinecode"|true>>~,
    the extension will ask the server to respect the order of the
    pipeline~. ~That means that it will wait to be sure that the previous
    request from the same connection has been taken by an extension
    before giving a request to an extension~.  ~Use this to write proxies
    extensions~, when you want to be able to pipeline the requests you
    to another server~. ~It is false by default~.
>>
<<pre class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|module>> <<a_api text="Configuration" | module Ocsigen_extensions.Configuration >> <<span class="ocsforge_color_delimiter"|~:>> <<span class="ocsforge_color_keyword"|sig>><<a_api text=".." | module Ocsigen_extensions.Configuration >><<span class="ocsforge_color_keyword"|end>>>><<div class="odocwiki_info"|~This modules contains types and constructor for the description of ~X~M~L
    configurations and the accordingly parsing~.
>>
<<pre id="VALget_hostname" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_hostname>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="request" | type Ocsigen_extensions.request >> <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|~Returns the hostname to be used for absolute links or redirections~.
    ~It is either the ~Host header or the hostname set in
    the configuration file~.
>>
<<pre id="VALget_port" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|get~_port>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="request" | type Ocsigen_extensions.request >> <<span class="ocsforge_color_delimiter"| -> >> int>>>><<div class="odocwiki_info"|~Returns the port to be used for absolute links or redirections~.
    ~It is either~:
* the port the server is listening at
* or the port in the ~Host header
* or the default port set in the configuration file~.

>>
<<pre id="VALnew_url_of_directory_request" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|new~_url~_of~_directory~_request>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<a_api text="request" | type Ocsigen_extensions.request >> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_request.t" | type Ocsigen_request.t >> <<span class="ocsforge_color_delimiter"| -> >> <<span class="ocsforge_color_uid"|Uri>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|t>>>>>><<div class="odocwiki_info"|new~_url~_of~_directory~_request create a redirection and generating a new url
    for the client ~(depending on the server configuration and request~)
>>


===@@id="3_Userdirectories"@@~User directories===


~Exception raised when an non~-existing user is found
<<pre id="EXCEPTIONNoSuchUser" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|NoSuchUser>>>><<pre class="ocsforge_color odocwiki_code" id="TYPEud_string"|<<span class="ocsforge_color_keyword"|type>> <<span class="odocwiki_name"|ud~_string>>>><<div class="odocwiki_info"|~The type for string that may contain a ~$u~(~.~.~.~)
>>
<<pre id="VALparse_user_dir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|parse~_user~_dir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="ud_string" | type Ocsigen_extensions.ud_string >>>>>><<pre id="VALreplace_user_dir" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|replace~_user~_dir>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|<<span class="ocsforge_color_uid"|Re>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Pcre>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|regexp>> <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="ud_string" | type Ocsigen_extensions.ud_string >> <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> string>>>><<div class="odocwiki_info"|raises <<span class="odocwiki_inlinecode"|~Not~_found>> is the directory does not exist
>>
<<pre id="EXCEPTIONNot_concerned" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|exception>> <<span class="odocwiki_name"|Not_concerned>>>><<div class="odocwiki_info"|
===@@id="3_Regularexpressionsforredirections"@@~Regular expressions for redirections===

>>
<<pre id="VALfind_redirection" class="ocsforge_color odocwiki_code"|<<span class="ocsforge_color_keyword"|val>> <<span class="odocwiki_name"|find~_redirection>> <<span class="ocsforge_color_delimiter"|~:>> <<span class="odocwiki_type"|\\  <<span class="ocsforge_color_uid"|Re>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_uid"|Pcre>><<span class="ocsforge_color_delimiter"| . >><<span class="ocsforge_color_lid"|regexp>> <<span class="ocsforge_color_delimiter"| -> >> bool <<span class="ocsforge_color_delimiter"| -> >> string <<span class="ocsforge_color_delimiter"| -> >> <<a_api text="Ocsigen_request.t" | type Ocsigen_request.t >> <<span class="ocsforge_color_delimiter"| -> >> string>>>>