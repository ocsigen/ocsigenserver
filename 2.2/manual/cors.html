<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Cross-Origin Resource Sharing</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script><script src="/js/client.js"></script></head><body class="ocsigenserver 2.2"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="/" class="ocsimore_phrasing_link"><img src="/img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Server
</p><ul class="mainmenu"><li class="mainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="mainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li></ul><div class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-current"><a href="/ocsigenserver/2.9/manual/quickstart" class="ocsimore_phrasing_link">Server</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-toolkit/1.1.0/manual/intro" class="ocsimore_phrasing_link">Toolkit</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-page"><a href="/projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="/papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="/credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="/blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><div class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.2/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.2/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.2/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.2/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.2/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.2/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.2/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.2/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.2/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.2/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.2/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.2/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.2/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.2/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.2/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.2/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.2/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.2/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.2/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.2/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.2/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.2/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.2/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3></div></nav></div></div><button id="reason">Switch to </button><div class="twocols"><div class="leftcol"><div class="how-versions"><input id="how-versions-toggle" type="checkbox"/><label for="how-versions-toggle" class="how-versions-current">Version 2.2</label><div class="how-versions-all"><a href="/ocsigenserver/dev/manual/cors">dev</a><a href="/ocsigenserver/2.9/manual/cors">2.9</a><a href="/ocsigenserver/2.8/manual/cors">2.8</a><a href="/ocsigenserver/2.7/manual/cors">2.7</a><a href="/ocsigenserver/2.6/manual/cors">2.6</a><a href="/ocsigenserver/2.5/manual/cors">2.5</a><a href="/ocsigenserver/2.3/manual/cors">2.3</a><span class="how-versions-all-current">2.2</span><a href="/ocsigenserver/2.1/manual/cors">2.1</a><a href="/ocsigenserver/1.3.4/manual/cors">1.3.4</a><a href="/ocsigenserver/1.2.2/manual/cors">1.2.2</a><a href="/ocsigenserver/1.1.0/manual/cors">1.1.0</a></div></div><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><div class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.2/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.2/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.2/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.2/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.2/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.2/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.2/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.2/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.2/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.2/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.2/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.2/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.2/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.2/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.2/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.2/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.2/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.2/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.2/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.2/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.2/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.2/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.2/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3></div></div><div class="rightcol"><h1>Cross-Origin Resource Sharing</h1><h1> The CORS extension </h1><p>This extension is used to allow other servers to serve pages
requesting data on that one using XmlHttpRequest. It adds headers to
the server response and handle preflight OPTIONS requests to indicate
if some client side code has the right to access resources.
</p><p>See the <a href="http://www.w3.org/TR/cors/" class="ocsimore_phrasing_link">CORS specifications</a> for more
informations.
</p><p>In order to use it, you must first add the following line to your
<span class="teletype">ocsigenserver.conf</span>:
</p><pre>&lt;extension findlib-package=&quot;ocsigenserver.ext.cors&quot;/&gt;
</pre><h2> config </h2><p>The extension is activated by the <span class="teletype">&lt;cors/&gt;</span> tag.
</p><p>The extension must be used after the extension serving the content (like eliom or staticmod) since it adds headers to already answered requests.
</p><p>The attributes of the cors tag are:
</p><ul><li> <span class="teletype">max_age</span>: this is a integer telling the browser how long the
preflight information are valid: it prevents doing the OPTIONS
requests. This option adds the <span class="teletype">Access-Control-Max-Age</span> header.
</li></ul><ul><li> <span class="teletype">credentials</span>: Adds the <span class="teletype">Access-Control-Allow-Credentials</span>
header to the preflight request.
</li></ul><ul><li> <span class="teletype">exposed_headers</span>: This is a comma separated list of header
names. This is the list of user defined headers accessible from the
client. it Adds the <span class="teletype">Access-Control-Expose-Headers</span> header.
</li></ul><ul><li> <span class="teletype">methods</span>: This is a comma separated list of method names. If
there is a requested method header in the preflight request, it adds
the <span class="teletype">Access-Control-Allow-Methods</span> header if it match, otherwise
there is no cors header added.
</li></ul><p>Note that the extension should be used with <span><a class="ocsforge_doclink_ocsigenserver" href="/ocsigenserver/2.2/manual/accesscontrol">accesscontrol</a></span> to limit the application having access to the resources. This is done by checking the &quot;origin&quot; header.
</p><h2> Examples </h2><ul><li> minimal configuration allowing all requests with no credentials.
</li></ul><pre>&lt;cors/&gt;
</pre><ul><li> A configuration allowing access to an eliom application at path &quot;eliom_site&quot;, from localhost:8081
</li></ul><pre>&lt;if&gt;
  &lt;and&gt;
    &lt;header name=&quot;origin&quot; regexp=&quot;http://localhost:8081&quot;/&gt;
    &lt;path regexp=&quot;eliom_site&quot; /&gt;
  &lt;/and&gt;
  &lt;then&gt;
    &lt;cors max_age=&quot;86400&quot;
          credentials=&quot;true&quot;
          methods=&quot;POST,GET,HEAD&quot;
          exposed_headers=&quot;
            x-eliom-application,
            x-eliom-location,
            x-eliom-set-process-cookies&quot;/&gt;
  &lt;/then&gt;
&lt;/if&gt;
</pre></div></div></div></body></html>
