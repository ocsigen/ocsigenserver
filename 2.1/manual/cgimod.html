<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CGImod</title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js"></script><script src="/js/client.js"></script></head><body class="ocsigenserver 2.1 cgimod"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href="/" class="ocsimore_phrasing_link"><img src="/img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Server
</p><ul class="mainmenu"><li class="mainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="mainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li></ul><div class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href="/" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href="/tuto/6.2/manual/intro" class="ocsimore_phrasing_link">Doc</a>
</li><li><a href="/eliom/6.3/manual/intro" class="ocsimore_phrasing_link">Eliom</a>
</li><li><a href="/js_of_ocaml/3.1.0/manual/overview" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-current"><a href="/ocsigenserver/2.9/manual/quickstart" class="ocsimore_phrasing_link">Server</a>
</li><li><a href="/lwt/3.2.1/manual/manual" class="ocsimore_phrasing_link">Lwt</a>
</li><li><a href="/tyxml/4.1.0/manual/intro" class="ocsimore_phrasing_link">Tyxml</a>
</li><li><a href="/ocsigen-toolkit/1.1.0/manual/intro" class="ocsimore_phrasing_link">Toolkit</a>
</li><li><a href="/ocsigen-start/1.1.0/manual/intro" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-page"><a href="/projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href="/papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href="/credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href="/blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><div class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.1/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.1/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.1/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.1/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.1/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.1/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.1/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.1/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.1/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.1/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.1/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.1/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.1/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.1/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.1/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.1/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.1/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.1/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.1/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.1/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.1/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.1/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.1/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3></div></nav></div></div><button id="reason">Switch to </button><div class="twocols"><div class="leftcol"><div class="how-versions"><input id="how-versions-toggle" type="checkbox"/><label for="how-versions-toggle" class="how-versions-current">Version 2.1</label><div class="how-versions-all"><a href="/ocsigenserver/dev/manual/cgimod">dev</a><a href="/ocsigenserver/2.9/manual/cgimod">2.9</a><a href="/ocsigenserver/2.8/manual/cgimod">2.8</a><a href="/ocsigenserver/2.7/manual/cgimod">2.7</a><a href="/ocsigenserver/2.6/manual/cgimod">2.6</a><a href="/ocsigenserver/2.5/manual/cgimod">2.5</a><a href="/ocsigenserver/2.3/manual/cgimod">2.3</a><a href="/ocsigenserver/2.2/manual/cgimod">2.2</a><span class="how-versions-all-current">2.1</span><a href="/ocsigenserver/1.3.4/manual/cgimod">1.3.4</a><a href="/ocsigenserver/1.2.2/manual/cgimod">1.2.2</a><a href="/ocsigenserver/1.1.0/manual/cgimod">1.1.0</a></div></div><form id="search"><input name="q" id="q" placeholder="search ..."/><button>Search</button></form><div class="how-doctree"><h1>Ocsigen server</h1><h2>Usage</h2><h3><a href="/ocsigenserver/2.1/manual/quickstart" class="ocsimore_phrasing_link">Quick start</a></h3><h3><a href="/ocsigenserver/2.1/manual/launching" class="ocsimore_phrasing_link">Launching the server</a></h3><h3><a href="/ocsigenserver/2.1/manual/config" class="ocsimore_phrasing_link">Configuration file</a></h3><h3><a href="/ocsigenserver/2.1/manual/misc" class="ocsimore_phrasing_link">Misc</a></h3><h2>Extensions</h2><h3><a href="/ocsigenserver/2.1/manual/staticmod" class="ocsimore_phrasing_link">Staticmod</a></h3><h3><a href="/ocsigenserver/2.1/manual/eliom" class="ocsimore_phrasing_link">Eliom</a></h3><h3><a href="/ocsigenserver/2.1/manual/extendconfiguration" class="ocsimore_phrasing_link">Extendconfiguration</a></h3><h3><a href="/ocsigenserver/2.1/manual/accesscontrol" class="ocsimore_phrasing_link">Accesscontrol</a></h3><h3><a href="/ocsigenserver/2.1/manual/authbasic" class="ocsimore_phrasing_link">Authbasic</a></h3><h3><a href="/ocsigenserver/2.1/manual/cgimod" class="ocsimore_phrasing_link">CGImod</a></h3><h3><a href="/ocsigenserver/2.1/manual/deflatemod" class="ocsimore_phrasing_link">Deflatemod</a></h3><h3><a href="/ocsigenserver/2.1/manual/redirectmod" class="ocsimore_phrasing_link">Redirectmod</a></h3><h3><a href="/ocsigenserver/2.1/manual/revproxy" class="ocsimore_phrasing_link">Revproxy</a></h3><h3><a href="/ocsigenserver/2.1/manual/rewritemod" class="ocsimore_phrasing_link">Rewritemod</a></h3><h3><a href="/ocsigenserver/2.1/manual/outputfilter" class="ocsimore_phrasing_link">Outputfilter</a></h3><h3><a href="/ocsigenserver/2.1/manual/userconf" class="ocsimore_phrasing_link">Userconf</a></h3><h3><a href="/ocsigenserver/2.1/manual/comet" class="ocsimore_phrasing_link">Comet</a></h3><h3><a href="/ocsigenserver/2.1/manual/cors" class="ocsimore_phrasing_link">CORS</a></h3><h2>Developer documentation</h2><h3>Developing with the Ocsigen framework</h3><h4><a href="/ocsigenserver/2.1/manual/lwtoc" class="ocsimore_phrasing_link">Cooperative threads</a></h4><h4><a href="/ocsigenserver/2.1/manual/staticlink" class="ocsimore_phrasing_link">Static linking of the Ocsigen server</a></h4><h3><a href="/ocsigenserver/2.1/manual/extend" class="ocsimore_phrasing_link">Writing an extension</a></h3><h3><a href="/ocsigenserver/2.1/manual/libraries" class="ocsimore_phrasing_link">Libraries</a></h3><h3><a href="/ocsigenserver/2.1/manual/wrapping" class="ocsimore_phrasing_link">specific wrapping</a></h3></div></div><div class="rightcol"><h1>CGImod</h1><p>CGImod is a module for running CGI scripts with ocsigen. It is in beta version. Submit your bugs, feature wishes (or any enhancement/mistake in the documentation) <a href="https://github.com/ocsigen/ocsigenserver" class="ocsimore_phrasing_link">here</a>.
</p><h2> CGImod </h2><h3>What is cgimod?</h3><p>Cgimod is a module for Ocsigen that allows you to run CGI scripts
on your server. It is also the only way to run PHP scripts on
Ocsigen, through php5-cgi.
</p><h3>What do I need to use cgimod?</h3><p>You need a working Ocsigen installation. If you want to run PHP
scripts, you need php5-cgi too.
</p><h3>How do I use cgimod?</h3><p>First, load the extension in the configuration file:
</p><pre>&lt;extension findlib-package=&quot;ocsigenserver.ext.cgimod&quot; /&gt;
</pre><p>Alternatively, if you do not want to use findlib, you need to
load cgimod explicitly:
</p><pre>&lt;extension module=&quot;/path/to/cgimod.cmo&quot; /&gt;
</pre><h3>How do I configure cgimod?</h3><p>You can set the timeout value for CGI scripts globally, using:
</p><pre>  &lt;extension findlib-package=&quot;ocsigenserver.ext.cgimod&quot; &gt;
    &lt;cgitimeout value=&quot;30&quot; /&gt; &lt;!-- optionnal --&gt;
  &lt;/extension&gt;
</pre><p>Next, you have to specify which scripts you wish to execute, in
which host/site, and how. There are several ways to do that.
Choose one which suits your needs and stick with it — it's very
easy to get lost so keep things as simple as you can!
</p><p>+ The easy way: useful if you just want a &quot;cgi-bin&quot; directory.
</p><pre>  &lt;site dir=&quot;whatever&quot;&gt;
    &lt;!-- ... --&gt;
    &lt;cgi root=&quot;cgi-bin&quot; dir=&quot;/usr/lib/cgi-bin/&quot; /&gt;
    &lt;!-- ... --&gt;
  &lt;/site&gt;
</pre><p>When someone reaches <span class="teletype">http://yoursite/whatever/cgi-bin/exec.sh</span>, then
<span class="teletype">/usr/lib/cgi-bin/exec.sh</span> is executed.
</p><p>+ The regexp way: useful if you want to specify the name of
the script to be executed.
</p><pre>  &lt;site dir=&quot;whatever&quot;&gt;
    &lt;cgi regexp=&quot;cgi-bin/([^/]*)&quot;
          dir=&quot;/usr/lib/cgi-bin/&quot;
          script=&quot;\1&quot; /&gt;
  &lt;/site&gt;
</pre><p>This is the same example using regexps. The &quot;regexp&quot; part matches the
url, &quot;dir&quot; is the physical directory containing the scripts and
&quot;script&quot; is the name of the script to execute. Here, &quot;\1&quot; makes
reference to the first (parenthesized) subexpression in &quot;regexp&quot; (and of
course you can use &quot;\2&quot;, &quot;\3&quot;, for the second, third, etc.).
<em>Warning: until recently, the syntax was $1, $2, etc.</em>
</p><p><em>End your regexps with <span class="teletype">$</span> if you want them to match the full URL.</em>
</p><p>Here is another example:
</p><pre>  &lt;site dir=&quot;&quot;&gt;
    &lt;cgi regexp=&quot;darcsweb&quot;
          dir=&quot;/usr/lib/cgi-bin/&quot;
          script=&quot;darcsweb.cgi&quot; /&gt;
  &lt;/site&gt;
</pre><p>Note: <a href="http://blitiri.com.ar/p/darcsweb/" class="ocsimore_phrasing_link">Darcsweb</a> is a clean web
interface for darcs, written in Python.
</p><p>+ The exec way: useful for PHP (and other script languages)
</p><pre>  &lt;site dir=&quot;&quot;&gt;
    &lt;!-- To use PHP as a CGI module: --&gt;
    &lt;!-- WARNING:
    remember to put the most generic regexp at the end! --&gt;

    &lt;!-- First, take care of implicit index.php --&gt;
    &lt;cgi regexp=&quot;(.*)/&quot;
         dir=&quot;/var/www/\1&quot;
         script=&quot;index.php&quot;
         exec=&quot;/usr/bin/php5-cgi&quot;/&gt;

    &lt;!-- Then, execute every other .php --&gt;
    &lt;cgi regexp=&quot;((.*)/)?([^/]*).php&quot;
         dir=&quot;/var/www/\2&quot;
         script=&quot;\3.php&quot;
         exec=&quot;/usr/bin/php5-cgi&quot;/&gt;
  &lt;/site&gt;
</pre><p>Just like the previous one, but you can execute the script through
some interpreter (here, php5-cgi) instead of launching it directly.
</p><h3>How do I set my own environment variables?</h3><p>Use <span class="teletype">&lt;setenv var=&quot;&quot; val=&quot;&quot; /&gt;</span> inside <span class="teletype">&lt;cgi&gt;</span>.
</p><p>Here is an example for setting up trac:
</p><pre>  &lt;!-- Trac --&gt;
  &lt;site dir=&quot;trac&quot; charset=&quot;utf-8&quot;&gt;
       &lt;static dir=&quot;/var/www/ocsigen/site/trac&quot; /&gt;

       &lt;!-- An example defining its own environment variable: --&gt;
       &lt;cgi regexp=&quot;&quot;
            dir=&quot;/usr/share/trac/cgi-bin&quot;
            script=&quot;trac.cgi&quot; &gt;

            &lt;setenv var=&quot;TRAC_ENV&quot; val=&quot;/var/www/trac&quot; /&gt;
    &lt;/cgi&gt;
  &lt;/site&gt;
</pre><h3>Limitations</h3><p>The <a href="http://www.w3.org/CGI/" class="ocsimore_phrasing_link">CGI spec</a> is very
short and ambiguous. We tried to follow it as closely as we could, but
this was not enough. Some environment variables are expected by most
scripts but absent from the spec, and some variables present in the spec
are very mysterious (<span class="teletype">PATH_TRANSLATED</span> for example). We did our best —
don't hesitate to fill a bug report in case of problems.
</p><p>The regexp part is quite intricate and some mysterious bugs happen from
time to time for some users. Once again, report any reproductible
problem!
</p><p>Morever, cgimod does not support FastCGI, which makes it barely usable
under heavy load (particularly for PHP).
</p><p><em>Page written by Gabriel Kerneis</em>
</p></div></div></div></body></html>
